<!-- Created by Silvy Evtimov Banzhov, 12.2025 -->
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Free Fall Simulator / Свободно падане</title>
<style>
  body { font-family: sans-serif; margin:0; padding:0; display:flex; height:100vh; }
  #controls { width:40%; background:#f0f0f0; padding:40px; box-sizing:border-box; }
  #controls h2 { font-size:32px; margin-bottom:30px; }
  .control-label { display:block; margin:20px 0 10px; font-size:28px; }
  .control-input { font-size:28px; width:100%; padding:8px; }
  #controls button { font-size:28px; padding:10px 20px; margin-top:20px; cursor:pointer; }
  #info { font-size:28px; margin-top:20px; }
  #note { font-size:22px; margin-top:20px; font-style:italic; color:#333; }
  #visual { width:60%; background:#eef; display:flex; justify-content:center; align-items:center; border-left:3px solid #ccc; position: relative; }
  #canvas {
    border:1px solid #333;
    background:#eef;
    width:90%;
    height:90%;
  }
  #velocityBox {
    position: absolute;
    top: 10px;
    right: 20px;
    background: rgba(255,255,255,0.8);
    border: 1px solid #333;
    padding: 10px 20px;
    font-size: 24px;
    font-weight: bold;
  }
</style>
</head>
<body>

<div id="controls">
  <h2 id="title">Free Fall Simulator / Свободно падане</h2>
  
  <label class="control-label" id="labelHeight">Height (m) / Височина (м):
    <input type="number" id="height" class="control-input" value="10">
  </label>

  <label class="control-label" id="labelMass">Mass (kg) / Маса (кг):
    <input type="number" id="mass" class="control-input" value="1">
  </label>

  <label class="control-label" id="labelPauseTime">Pause after (s) / Пауза след (с):
    <input type="number" id="pauseTime" class="control-input" value="0">
  </label>

  <button id="dropBtn" onclick="startFall()">Drop / Пусни</button>
  <button id="langBtn" onclick="toggleLanguage()">BG/EN</button>

  <p id="info"></p>
  <p id="note">Experiment is in vacuum, no air resistance g = 9.81 m/s²/ Експериментът е във вакуум, без въздушно съпротивление, g = 9.81 m/s²</p>
</div>

<div id="visual">
  <canvas id="canvas" width="800" height="800"></canvas>
  <div id="velocityBox">v: 0.00 m/s</div>
</div>

<script>
const canvas = document.getElementById('canvas');
const ctx = canvas.getContext('2d');
const velocityBox = document.getElementById('velocityBox');
let y=0, vy=0, animation, paused=false;
let lang='EN';

function startFall(){
    cancelAnimationFrame(animation);
    paused=false;

    canvas.width = canvas.clientWidth;
    canvas.height = canvas.clientHeight;

    const h = parseFloat(document.getElementById('height').value);
    const g = 9.81;
    y=0; vy=0;
    const scale = canvas.height / h;
    const dt = 0.02;
    const info = document.getElementById('info');
    const pauseTime = parseFloat(document.getElementById('pauseTime').value);
    let t=0;

    function animate(){
        if(!paused){
            vy += g*dt;
            y += vy*dt;
            t += dt;
            if(pauseTime>0 && t>=pauseTime) paused=true;

            if(y*scale >= canvas.height){
                y = canvas.height/scale; vy=0;
                let msg = lang==='EN' ? `Landed! Time: ${(Math.sqrt(2*h/g)).toFixed(2)} s, Velocity: ${(Math.sqrt(2*g*h)).toFixed(2)} m/s`
                                       : `Приземено! Време: ${(Math.sqrt(2*h/g)).toFixed(2)} с, Скорост: ${(Math.sqrt(2*g*h)).toFixed(2)} м/с`;
                info.innerHTML = msg;
                draw();
                return;
            }
        }

        draw();
        animation = requestAnimationFrame(animate);
    }

    function draw(){
        ctx.clearRect(0,0,canvas.width,canvas.height);

        // --- Thicker ruler lines + bigger font ---
        ctx.strokeStyle = '#222';
        ctx.lineWidth = 3;
        for(let mark of [1,10,100]){
            let yPos = mark*scale;
            if(yPos<=canvas.height){
                ctx.beginPath();
                ctx.moveTo(0, yPos);
                ctx.lineTo(30, yPos);
                ctx.stroke();
                ctx.font = '20px sans-serif';
                ctx.fillStyle = '#000';
                ctx.fillText(`${mark}m`, 35, yPos+7);
            }
        }

        // --- Ball shrinking ---
        let radius = 15*Math.max(0.5,1-y/h*0.5);
        ctx.fillStyle='red';
        ctx.beginPath();
        ctx.arc(canvas.width/2, y*scale, radius, 0, Math.PI*2);
        ctx.fill();

        // --- Fixed velocity box ---
        velocityBox.innerText = `v: ${vy.toFixed(2)} ${lang==='EN'?'m/s':'м/с'}`;
    }

    animate();
}

// --- Language toggle: hide the non-selected language ---
function toggleLanguage(){
    if(lang==='EN'){
        lang='BG';
        document.getElementById('title').innerText='Свободно падане';
        document.getElementById('labelHeight').innerHTML='Височина (м): <input type="number" id="height" class="control-input" value="'+document.getElementById('height').value+'">';
        document.getElementById('labelMass').innerHTML='Маса (кг): <input type="number" id="mass" class="control-input" value="'+document.getElementById('mass').value+'">';
        document.getElementById('labelPauseTime').innerHTML='Пауза след (с): <input type="number" id="pauseTime" class="control-input" value="'+document.getElementById('pauseTime').value+'">';
        document.getElementById('dropBtn').innerText='Пусни';
        document.getElementById('langBtn').innerText='EN';
        document.getElementById('note').innerText='Експериментът е във вакуум, без въздушно съпротивление';
    } else {
        lang='EN';
        document.getElementById('title').innerText='Free Fall Simulator';
        document.getElementById('labelHeight').innerHTML='Height (m): <input type="number" id="height" class="control-input" value="'+document.getElementById('height').value+'">';
        document.getElementById('labelMass').innerHTML='Mass (kg): <input type="number" id="mass" class="control-input" value="'+document.getElementById('mass').value+'">';
        document.getElementById('labelPauseTime').innerHTML='Pause after (s): <input type="number" id="pauseTime" class="control-input" value="'+document.getElementById('pauseTime').value+'">';
        document.getElementById('dropBtn').innerText='Drop';
        document.getElementById('langBtn').innerText='BG';
        document.getElementById('note').innerText='Experiment is in vacuum, no air resistance';
    }
}
</script>
</body>
</html>
