<!DOCTYPE html>
<html lang="bg">
<head>
<meta charset="UTF-8">
<title>Математично махало</title>

<style>
body{
  margin:0;
  font-family:sans-serif;
  background:#eef;
}
#scene{
  width:100vw;
  height:100vh;
  position:relative;
}

/* махало */
#pivot{
  position:absolute;
  left:50%;
  top:80px;
  width:0;
  height:0;
}
#arm{
  position:absolute;
  top:0;
  left:0;
  transform-origin: top center;
}
#rod{
  width:3px;
  background:#333;
  margin:auto;
}
#bob{
  width:30px;
  height:30px;
  border-radius:50%;
  background:#555;
  margin:auto;
}

/* контроли */
#controls{
  position:absolute;
  left:20px;
  top:20px;
  background:#fff;
  border:2px solid #333;
  padding:12px;
  font-size:18px;
}
.row{
  margin-bottom:8px;
}
button{
  width:40px;
}

/* панел */
#panel{
  position:absolute;
  right:20px;
  top:20px;
  background:#fff;
  border:2px solid #333;
  padding:16px;
  font-size:20px;
  line-height:1.4;
}

#formula{
  position:absolute;
  bottom:20px;
  left:50%;
  transform:translateX(-50%);
  font-size:24px;
}

#watermark{
  position:absolute;
  bottom:10px;
  right:15px;
  font-size:12px;
  opacity:0.5;
}
</style>
</head>

<body>
<div id="scene">

<div id="pivot">
  <div id="arm">
    <div id="rod"></div>
    <div id="bob"></div>
  </div>
</div>

<div id="controls">
  <div class="row">
    Маса (kg):
    <button onclick="chg('m',-1)">−</button>
    <span id="mVal">1</span>
    <button onclick="chg('m',1)">+</button>
  </div>

  <div class="row">
    Дължина (m):
    <button onclick="chg('L',-0.1)">−</button>
    <span id="LVal">1.0</span>
    <button onclick="chg('L',0.1)">+</button>
  </div>

  <div class="row">
    Амплитуда (°):
    <button onclick="chg('A',-1)">−</button>
    <span id="AVal">10</span>
    <button onclick="chg('A',1)">+</button>
  </div>
</div>

<div id="panel"></div>

<div id="formula">
  T = 2π √(L / g)
</div>

<div id="watermark">Created by Silvy Evtimov Banzhov · 2025</div>

</div>

<script>
let m=1, L=1.0, A=10;
const g=9.81;
let t=0;

const arm=document.getElementById("arm");
const rod=document.getElementById("rod");
const bob=document.getElementById("bob");
const panel=document.getElementById("panel");

function chg(v,d){
  if(v==="m") m=Math.max(0.1,m+d);
  if(v==="L") L=Math.max(0.1,+(L+d).toFixed(2));
  if(v==="A") A=Math.max(1,A+d);
  update();
}

function update(){
  mVal.innerText=m.toFixed(1);
  LVal.innerText=L.toFixed(2);
  AVal.innerText=A;

  const T0=2*Math.PI*Math.sqrt(L/g);
  const theta=A*Math.PI/180;
  const Tcorr=T0*(1+theta*theta/16);

  panel.innerHTML=
    `Маса m = ${m.toFixed(1)} kg<br>
     Дължина L = ${L.toFixed(2)} m<br>
     Амплитуда = ${A}°<br><br>
     Период (малки ъгли) = ${T0.toFixed(2)} s<br>
     Коригиран период = ${Tcorr.toFixed(2)} s<br><br>
     ❗ Масата не влияе`;

  const px=L*200;
  rod.style.height=px+"px";
  bob.style.marginTop="-2px";
}

function animate(){
  t+=0.016;
  const omega=Math.sqrt(g/L);
  const angle=A*Math.PI/180*Math.cos(omega*t);
  arm.style.transform=`rotate(${angle*180/Math.PI}deg)`;
  requestAnimationFrame(animate);
}

update();
animate();
</script>
</body>
</html>
